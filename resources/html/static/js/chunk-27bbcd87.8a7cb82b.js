(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27bbcd87"],{"0ccb":function(e,t,n){var r=n("50c4"),o=n("1148"),i=n("1d80"),a=Math.ceil,c=function(e){return function(t,n,c){var s,u,l=String(i(t)),f=l.length,d=void 0===c?" ":String(c),p=r(n);return p<=f||""==d?l:(s=p-f,u=o.call(d,a(s/d.length)),u.length>s&&(u=u.slice(0,s)),e?l+u:u+l)}};e.exports={start:c(!1),end:c(!0)}},1148:function(e,t,n){"use strict";var r=n("a691"),o=n("1d80");e.exports="".repeat||function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},"408a":function(e,t,n){var r=n("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},4837:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n("d17e");function o(){return Object(r["a"])({url:"/manage/status",method:"get"})}function i(e){return Object(r["a"])({url:"/manage/uploading",method:"get",params:{status:e}})}function a(e){return Object(r["a"])({url:"/manage/uploaded",method:"get",params:{status:e}})}function c(e){return Object(r["a"])({url:"/manage/delsession",method:"delete",data:e})}},"4d90":function(e,t,n){"use strict";var r=n("23e7"),o=n("0ccb").start,i=n("9a0c");r({target:"String",proto:!0,forced:i},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"857a":function(e,t,n){var r=n("1d80"),o=/"/g;e.exports=function(e,t,n,i){var a=String(r(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),c+">"+a+"</"+t+">"}},9678:function(e,t,n){"use strict";var r=n("d4ec"),o=n("bee2"),i=(n("a434"),n("d3b7"),n("159b"),function(){function e(){Object(r["a"])(this,e),this.timers=[]}return Object(o["a"])(e,[{key:"addTimer",value:function(e,t){var n=setInterval(e,t);return this.timers.push(n),n}},{key:"removeTimer",value:function(e){clearInterval(e);var t=this.timers.indexOf(e);t>=0&&this.timers.splice(t,1)}},{key:"stopAllTimers",value:function(){this.timers.forEach((function(e){return clearInterval(e)})),this.timers=[]}}]),e}());t["a"]=i},9911:function(e,t,n){"use strict";var r=n("23e7"),o=n("857a"),i=n("af03");r({target:"String",proto:!0,forced:i("link")},{link:function(e){return o(this,"a","href",e)}})},"9a0c":function(e,t,n){var r=n("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},a434:function(e,t,n){"use strict";var r=n("23e7"),o=n("23cb"),i=n("a691"),a=n("50c4"),c=n("7b0b"),s=n("65f0"),u=n("8418"),l=n("1dde"),f=n("ae40"),d=l("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,g=Math.min,b=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var n,r,l,f,d,p,v=c(this),w=a(v.length),_=o(e,w),y=arguments.length;if(0===y?n=r=0:1===y?(n=0,r=w-_):(n=y-2,r=g(h(i(t),0),w-_)),w+n-r>b)throw TypeError(m);for(l=s(v,r),f=0;f<r;f++)d=_+f,d in v&&u(l,f,v[d]);if(l.length=r,n<r){for(f=_;f<w-r;f++)d=f+r,p=f+n,d in v?v[p]=v[d]:delete v[p];for(f=w;f>w-r+n;f--)delete v[f-1]}else if(n>r)for(f=w-r;f>_;f--)d=f+r-1,p=f+n-1,d in v?v[p]=v[d]:delete v[p];for(f=0;f<n;f++)v[f+_]=arguments[f+2];return v.length=w-r+n,l}})},af03:function(e,t,n){var r=n("d039");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b680:function(e,t,n){"use strict";var r=n("23e7"),o=n("a691"),i=n("408a"),a=n("1148"),c=n("d039"),s=1..toFixed,u=Math.floor,l=function(e,t,n){return 0===t?n:t%2===1?l(e,t-1,n*e):l(e*e,t/2,n)},f=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},d=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){s.call({})}));r({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,n,r,c,s=i(this),d=o(e),p=[0,0,0,0,0,0],h="",g="0",b=function(e,t){var n=-1,r=t;while(++n<6)r+=e*p[n],p[n]=r%1e7,r=u(r/1e7)},m=function(e){var t=6,n=0;while(--t>=0)n+=p[t],p[t]=u(n/e),n=n%e*1e7},v=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==p[e]){var n=String(p[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(h="-",s=-s),s>1e-21)if(t=f(s*l(2,69,1))-69,n=t<0?s*l(2,-t,1):s/l(2,t,1),n*=4503599627370496,t=52-t,t>0){b(0,n),r=d;while(r>=7)b(1e7,0),r-=7;b(l(10,r,1),0),r=t-1;while(r>=23)m(1<<23),r-=23;m(1<<r),b(1,1),m(2),g=v()}else b(0,n),b(1<<-t,0),g=v()+a.call("0",d);return d>0?(c=g.length,g=h+(c<=d?"0."+a.call("0",d-c)+g:g.slice(0,c-d)+"."+g.slice(c-d))):g=h+g,g}})},bee2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("a38e");function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Object(r["a"])(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},cadb:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n("53ca");n("ac1f"),n("00b4"),n("5319"),n("4d63"),n("2c3e"),n("25f0"),n("d3b7"),n("4d90"),n("159b");function o(e,t){if(0===arguments.length||!e)return null;var n,o=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(r["a"])(e)?n=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),n=new Date(e));var i={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},a=o.replace(/{([ymdhisa])+}/g,(function(e,t){var n=i[t];return"a"===t?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return a}function i(e,t){e=10===(""+e).length?1e3*parseInt(e):+e;var n=new Date(e),r=Date.now(),i=(r-n)/1e3;return i<30?i+"秒":i<3600?Math.ceil(i/60)+"分钟":i<86400?Math.ceil(i/3600)+"小时":i<172800?"1天":t?o(e,t):n.getMonth()+1+"月"+n.getDate()+"日"+n.getHours()+"时"+n.getMinutes()+"分"}},d17e:function(e,t,n){"use strict";var r=n("c7eb"),o=n("1da1"),i=(n("d3b7"),n("bc3a")),a=n.n(i),c=n("5c96"),s=n("4360"),u=n("5f87"),l=a.a.create({baseURL:"/",timeout:1e4,withCredentials:!0});l.interceptors.request.use((function(e){return s["a"].getters.token&&(e.headers["X-Token"]=Object(u["a"])()),e}),(function(e){console.log("interceptors ",e);var t=2,n=function(){var i=Object(o["a"])(Object(r["a"])().mark((function o(){var i,a;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,i=e.config,r.next=4,l(i);case 4:return a=r.sent,r.abrupt("return",Promise.resolve(a));case 8:if(r.prev=8,r.t0=r["catch"](0),!(t>0)){r.next=15;break}return console.warn("Error occurred, retrying (".concat(t,"/").concat(t,")...")),r.abrupt("return",n());case 15:return r.abrupt("return",Promise.reject(r.t0));case 16:case"end":return r.stop()}}),o,null,[[0,8]])})));return function(){return i.apply(this,arguments)}}();return new Promise((function(e,t){n().then((function(t){e(t)})).catch((function(e){t(e)}))}))})),l.interceptors.response.use((function(e){var t=e.data;return 200!==t.code?(Object(c["Message"])({message:t.msg||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||c["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){s["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.msg||"Error"))):t}),(function(e){return Object(c["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=l},d27a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 已完成 "),n("el-col",[n("complete-item",{attrs:{sessions:e.completedSessions}})],1)],1)},o=[],i=(n("99af"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sessions}},[n("el-table-column",{attrs:{label:"文件名",width:"220",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("el-tag",[e._v("group: "+e._s(t.row.file_info.storage.group))]),e._v(" "),n("br"),n("el-tag",[e._v("address: "+e._s(t.row.file_info.storage.server_addr))]),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("p",[e._v(e._s(t.row.file_info.name))])])],1)]}}])}),n("el-table-column",{attrs:{label:"大小",prop:"upload_session.file_info.file_meta.size",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(e.formatFileSize(t.row.file_info.file_meta.size)))])]}}])}),n("el-table-column",{attrs:{label:"Group",prop:"file_info.storage.group",width:"120",sortable:""}}),n("el-table-column",{attrs:{label:"创建时间",width:"280",prop:"upload_session.cteated_time",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.ptime(t.row.upload_session.cteated_time)))])]}}])}),n("el-table-column",{attrs:{label:"状态",width:"180",prop:"upload_session.status"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.openfile(t.row.file_info)}}},[e._v(" 打开")]),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.clickMethed(t.row)}}},[e._v(" 删除记录")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.delsession(t.row.upload_session.id)}}},[e._v("删除文件")])]}}])})],1)],1)}),a=[],c=n("c7eb"),s=n("1da1"),u=(n("b680"),n("9911"),n("cadb")),l=n("4837"),f={props:["sessions"],data:function(){return{property:"value"}},methods:{formatFileSize:function(e){var t=["B","KB","MB","GB","TB"],n=0;while(e>1024&&n<t.length-1)e/=1024,n++;return"".concat(e.toFixed(2)).concat(t[n])},ptime:function(e){return Object(u["b"])(e)},clickMethed:function(e){"异常"==e.upload_session.status?this.$emit("uploadClick",e):console.log("暂停")},openfile:function(e){console.log(e),window.open("http://"+e.storage.download_addr+"/"+e.link.path)},delsession:function(e){var t=this;return Object(s["a"])(Object(c["a"])().mark((function n(){return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["a"])({session_id:e}).then((function(){t.$emit("fetchSessions"),t.$message.success("删除成功")}))})).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()}}},d=f,p=n("2877"),h=Object(p["a"])(d,i,a,!1,null,null,null),g=h.exports,b=n("9678"),m={components:{CompleteItem:g},data:function(){return{completedSessions:[]}},created:function(){var e=this;this.timerUtil=new b["a"],this.fetchSessions(),this.timerUtil.addTimer((function(){e.fetchSessions()}),6e4)},methods:{fetchSessions:function(){var e=this,t=[];Object(l["c"])("上传成功").then((function(n){e.completedSessions=t.concat(n.data.data)}))}}},v=m,w=Object(p["a"])(v,r,o,!1,null,null,null);t["default"]=w.exports},d4ec:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))}}]);